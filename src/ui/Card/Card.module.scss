// Импортируем файл с токенами (переменными) для использования в стилях
@use '../../styles/tokens' as *;
// Импортируем файл с миксинами для повторного использования стилей
@use '../../styles/mixins' as *;

// Базовый класс для компонента Card
.card {
  /* декларации на верхнем уровне */
  // Внутренние отступы (большие)
  padding: $spacing-lg;
  // Скругление углов (большое)
  border-radius: $radius-lg;
  // Относительное позиционирование для псевдоэлементов
  position: relative;
  // Скрытие переполнения содержимого
  overflow: hidden;
  // Плавный переход для всех свойств с пользовательской timing-функцией
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

  /* миксины: первый напрямую, остальные во вложенном & {} */
  // Применяем стеклянный эффект (миксин glass)
  @include glass;
  // Применяем градиентную рамку (миксин gradient-border)
  & { @include gradient-border; }
  // Применяем мягкую тень (миксин soft-shadow)
  & { @include soft-shadow; }

  // Стили при наведении курсора на карточку
  &:hover {
    /* ВСЕ обычные декларации — СНАЧАЛА */
    // Легкое смещение вверх при наведении
    transform: translateY(-2px);
    // Увеличенная тень для светлой темы
    box-shadow: $shadow-lg-light;

    /* эффект blur тоже декларации — держим здесь, до вложенных правил */
    // Усиление размытия фона при наведении
    backdrop-filter: blur(25px);
    // Усиление размытия фона для WebKit-браузеров
    -webkit-backdrop-filter: blur(25px);

    /* потом — вложенные правила */
    // Для темной темы
    @media (prefers-color-scheme: dark) { 
      // Увеличенная тень для темной темы
      box-shadow: $shadow-lg-dark; 
    }
    // Увеличение непрозрачности псевдоэлемента при наведении
    &::before { 
      opacity: 0.12; 
    }
  }

  /* вложенный миксин — это уже nested rule, но внутри него нет деклараций после него */
  // Стили для фокуса (доступность)
  &:focus-visible { 
    // Применяем кольцо фокуса
    & { @include focus-ring; } 
  }

  // Стили при активации (нажатии на карточку)
  &:active { 
    // Возвращаем на место и легкое уменьшение
    transform: translateY(0) scale(0.98); 
  }

  // Псевдоэлемент для градиентного наложения
  &::before {
    // Обязательное свойство для псевдоэлемента
    content: '';
    // Абсолютное позиционирование
    position: absolute;
    // Растягиваем на весь родительский элемент
    inset: 0;
    // Наследуем скругление углов
    border-radius: inherit;
    // Отключаем события мыши
    pointer-events: none;
    // Начальная непрозрачность
    opacity: 0.08;
    // Плавный переход для непрозрачности
    transition: opacity 0.3s ease;
    // Градиентное наложение для светлой темы
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.1) 0%,
      rgba(255, 255, 255, 0.05) 50%,
      rgba(255, 255, 255, 0.02) 100%
    );

    // Для темной темы
    @media (prefers-color-scheme: dark) {
      // Градиентное наложение для темной темы (менее интенсивное)
      background: linear-gradient(
        135deg,
        rgba(255, 255, 255, 0.08) 0%,
        rgba(255, 255, 255, 0.03) 50%,
        rgba(255, 255, 255, 0.01) 100%
      );
    }
  }

  // Второй псевдоэлемент для дополнительного градиентного эффекта
  &::after {
    // Обязательное свойство для псевдоэлемента
    content: '';
    // Абсолютное позиционирование
    position: absolute;
    // Позиционирование с отступом в 1px от краев
    top: 1px; 
    left: 1px; 
    right: 1px; 
    bottom: 1px;
    // Скругление углов (немного меньше основного)
    border-radius: calc($radius-lg - 1px);
    // Градиентный эффект подсветки для светлой темы
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.05) 0%, transparent 50%);
    // Отключаем события мыши
    pointer-events: none;

    // Для темной темы
    @media (prefers-color-scheme: dark) {
      // Градиентный эффект подсветки для темной темы (менее интенсивный)
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.03) 0%, transparent 50%);
    }
  }

  // Стили для всех прямых потомков карточки
  > * { 
    // Относительное позиционирование для управления z-index
    position: relative; 
    // Поднимаем выше псевдоэлементов
    z-index: 1; 
  }
}




